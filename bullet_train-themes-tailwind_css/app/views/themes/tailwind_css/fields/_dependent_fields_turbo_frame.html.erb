<%
  stimulus_controller = "refresh-fields"
  html_options ||= {}
  html_options[:data] ||= {}
  html_options[:data][:controller] ||= ""
  html_options[:data][:controller] += " #{stimulus_controller}"
  html_options[:data][:action] ||= ""
  html_options[:data][:action] += " dependable:updated->refresh-fields#updateFrameFromDependentField turbo:frame-render->refresh-fields#finishFrameUpdate"
  html_options[:data][:refresh_fields_loading_class] ||= "opacity-60"

  dependable_fields ||= []
%>
<%= turbo_frame_tag id, **html_options do %>
  <%
    dependable_fields.each do |method|
      accept_query_string_override_for(form, method)
    end
  %>

  <%= yield stimulus_controller %>
<% end %>